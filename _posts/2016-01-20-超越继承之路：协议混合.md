---
title: <è½¬>è¶…è¶Šç»§æ‰¿ä¹‹è·¯ï¼šåè®®æ··åˆ
date: 2016-01-20 19:29:27
tags:
- Swift
toc: false
---

# è¶…è¶Šç»§æ‰¿ä¹‹è·¯ï¼šåè®®æ··åˆ

åªè¦ä½ å­¦ä¹ è¿‡é¢å‘å¯¹è±¡çš„è¯­è¨€æ¯”å¦‚ ObjC ï¼Œéƒ½çŸ¥é“ç»§æ‰¿çš„æ¦‚å¿µï¼Œä»–çš„ä¸€ä¸ªç”¨é€”æ˜¯åœ¨å¤šä¸ªç±»ä¹‹é—´å…±äº«ä»£ç ã€‚ä½†æ˜¯è¿™ç§è§£å†³æ–¹æ¡ˆå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥åˆæ¢ä¸€ä¸‹ Swift çš„åè®®æ‰©å±•ï¼Œä»¥åŠå¦‚ä½•æ··åˆä½¿ç”¨è¿™äº›åè®® - Mixinsï¼Œè‹±æ–‡åŸæ–‡[åœ°å€](http://alisoftware.github.io/swift/protocol/2015/11/08/mixins-over-inheritance/#fnref2)

å¦‚æœæ„Ÿè§‰å¤ªé•¿äº†ï¼Œè¯»ä¸ä¸‹å»ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä»£ç  [Swift Playground Code](http://alisoftware.github.io/assets/Mixins.playground.zip)

## ç»§æ‰¿çš„é—®é¢˜
æ¯”å¦‚ä½ æœ‰ä¸ª appï¼Œå…¶ä¸­æœ‰å¤§é‡çš„`UIViewController`ç±»éƒ½è¦å…±äº«ç›¸åŒçš„è¡Œä¸ºï¼Œä¾‹å¦‚ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªç›¸åŒæ ·å¼çš„æ±‰å ¡èœå•ã€‚ä½ ä¸æƒ³åœ¨æ¯ä¸ª`View Controllers`ä¸­éƒ½å®ç°ä¸€éã€æ±‰å ¡èœå•ã€çš„é€»è¾‘ï¼ˆè®¾ç½® `leftBarButtonItem`ï¼ŒæŒ‰é’®ç‚¹å‡»æ—¶æ‰“å¼€/å…³é—­èœå•ï¼‰

è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªé€šç”¨çš„`CommonViewController`ï¼Œç»§æ‰¿è‡ª`UIViewController`ï¼Œç„¶åå®ç°æ‰€æœ‰çš„è¡Œä¸ºï¼Œæ¥ç€è®©å…¶ä»–çš„`UIViewController`ç»§æ‰¿è‡ªè¿™ä¸ª`CommonViewController`ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»§æ‰¿è‡ª`UIViewController`ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œè¿™äº› VC å°†æ‹¥æœ‰è¿™äº›ç›¸åŒçš„æ–¹æ³•å’Œè¡Œä¸ºï¼Œä¸éœ€è¦å†æ¯æ¬¡éƒ½è‡ªå·±å®ç°ä¸€éäº†ã€‚

```swift
class CommonViewController: UIViewController {  
  func setupBurgerMenu() { â€¦ }
  func onBurgerMenuTapped() { â€¦ }
  var burgerMenuIsOpen: Bool {
    didSet { â€¦ }
  }
}

class MyViewController: CommonViewController {  
  func viewDidLoad() {
    super.viewDidLoad()
    setupBurgerMenu()
  }
}
```

ä½†æ˜¯åœ¨éšåçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ çªç„¶éœ€è¦ä¸€ä¸ª`UITableViewController`æˆ– `UICollectionViewController`...é ï¼ä¸èƒ½ä½¿ç”¨`CommonViewController`äº†ï¼Œå› ä¸ºä»–æ˜¯ `UIViewController` è€Œä¸æ˜¯`UITableViewController`ï¼

æˆ‘ä»¬è¯¥æ€ä¹ˆåšï¼Ÿæ–°å»ºä¸€ä¸ª`CommonTableViewController`å®ç°å’Œ`CommonViewController`ä¸€æ ·çš„åŠŸèƒ½ï¼Œä½†åªæ˜¯ç»§æ‰¿æ”¹ä¸º`UITableViewController`ï¼Ÿè¿™ä¼šäº§ç”Ÿå¥½å¤šé‡å¤ä»£ç ï¼Œç»å¯¹æ˜¯ä¸ªç³Ÿç³•é€é¡¶çš„è®¾è®¡ã€‚

<!--more-->

## Composition æ¥æ‹¯æ•‘æˆ‘ä»¬å•¦
å½“ç„¶ï¼Œæ”¿æ²»æ­£ç¡®çš„ç­”æ¡ˆå°±æ˜¯ï¼š

	ä½¿ç”¨ Compositionï¼Œä¸è¦ä½¿ç”¨ç»§æ‰¿å•¦ï¼

è¿™å°±æ„å‘³ç€ä¸ºäº†æ›¿ä»£ç»§æ‰¿ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºè‡ªå·±çš„`UIViewController`ï¼Œè¯¥ VC ç”±è¿™äº›å†…éƒ¨ç±»çš„é›†åˆç»„æˆï¼Œè€Œè¿™äº›å†…éƒ¨ç±»è´Ÿè´£æä¾›ç›¸åº”çš„è¡Œä¸ºã€‚

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸ª`BurgerMenuManager`ç±»ä¼šæä¾›æ‰€æœ‰å¿…é¡»çš„æ–¹æ³•æ¥è®¾ç½®æ±‰å ¡èœå•çš„å›¾æ ‡ï¼Œç„¶åä½¿ç”¨`BurgerMenuManager`è¿›è¡Œäº¤äº’ï¼Œè€Œæˆ‘ä»¬å¤§é‡çš„`UIViewControllers`éƒ½å°†ä¼šè®¾ç½®ä¸€ä¸ª `property` æ¥å¼•ç”¨è¿™ä¸ª`BurgerMenuManager`ï¼Œè¿›è€Œä¸æ±‰å ¡èœå•äº¤äº’ã€‚

```swift
class BurgerMenuManager {  
  func setupBurgerMenu() { â€¦ }
  func onBurgerMenuTapped() { burgerMenuIsOpen = !burgerMenuisOpen }
  func burgerMenuIsOpen: Bool { didSet { â€¦ } }
}

class MyViewController: UIViewController {  
  var menuManager: BurgerMenuManager()
  func viewDidLoad() {
    super.viewDidLoad()
    menuManager.setupBurgerMenu()
  }
}

class MyOtherViewController: UITableViewController {  
  var menuManager: BurgerMenuManager()
  func viewDidLoad() {
    super.viewDidLoad()
    menuManager.setupBurgerMenu()
  }  
}
```

å¯æ‚²çš„æ˜¯è¿™æ ·ä¹Ÿå¤ªç¬¨é‡äº†å§ï¼Œæ¯æ¬¡éƒ½éœ€è¦å¼•ç”¨ä¸€ä¸ªä¸­é—´å¯¹è±¡`menuManager`ï¼Œå¥½éº»çƒ¦~

## å¤šé‡ç»§æ‰¿
å¦ä¸€ä¸ªç°å®åŸå› æ˜¯ï¼šå¤§éƒ¨åˆ†çš„é¢å‘å¯¹è±¡è¯­è¨€éƒ½ä¸å…è®¸å¤šé‡ç»§æ‰¿ï¼ˆè¿™æ˜¯å› ä¸ºå­˜åœ¨ä¸€ä¸ª[è±å½¢ç±»ç»§æ‰¿é—®é¢˜](https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)ï¼‰

**æ„å‘³ç€ä¸€ä¸ªç±»ä¸èƒ½æœ‰å¤šä¸ªçˆ¶ç±»**

å‡å¦‚ä½ å®ç°äº†ä¸€ä¸ªæ¨¡å‹ç±»ï¼Œç”¨æ¥è¡¨ç¤ºç§‘å¹»äººç‰©ã€‚å‡å¦‚ä½ å·²ç»åˆ›å»ºäº†`DocEmmettBrown`,`DoctorWho` & `TimeLord`, `IronMan`, `Superman`â€¦ ç„¶åä»–ä»¬å¦‚ä½•ç›´æ¥å…³è”ï¼Ÿä¸€äº›äººèƒ½å¤Ÿæ—¶é—´æ—…è¡Œï¼Œä¸€äº›èƒ½å¤Ÿå¤ªç©ºæ—…è¡Œï¼Œè¿˜æœ‰äº›æ‰€æœ‰çš„äº‹éƒ½èƒ½åšï¼Œæœ‰äº›äººèƒ½é£æœ‰äº›ä¸èƒ½ï¼Œä¸€äº›æ˜¯äººç±»ä¸€äº›ä¸æ˜¯...

`class IronMan`ï¼ˆé’¢é“ä¾ ï¼‰å’Œ `class Superman`ï¼ˆè¶…äººï¼‰éƒ½èƒ½é£ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¼šé£çš„çˆ¶ç±» `class Flyer`ï¼Œç”±ä»–æ¥æä¾›é£è¡Œæ–¹æ³•çš„å®ç°`func fly()` ã€‚ä½† `IronMan` å’Œ `DocEmmettBrown` éƒ½æ˜¯äººç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªäººç±»çš„çˆ¶ç±»`Human`ï¼Œä¸æ­¤åŒæ—¶`Superman`å’Œ `TimeLord` éƒ½æ˜¯å¤–æ˜Ÿäºº `class Alien` çš„å­ç±»ã€‚ç¨ç­‰ä¸€ä¸‹... `IronMan`ï¼ˆé’¢é“ä¾ ï¼‰åŒæ—¶ç»§æ‰¿äº† `Flyer` å’Œ `Human`ï¼Ÿè¿™åœ¨ Swift ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼ˆå› ä¸º Swift ä¹Ÿæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­è¨€ï¼‰

æˆ‘ä»¬åœ¨ç»§æ‰¿ä¸­åªèƒ½äºŒé€‰ä¸€ï¼Œå¦‚æœè®© `IronMan` ï¼ˆé’¢é“ä¾ ï¼‰ç»§æ‰¿è‡ª `Human`ï¼ˆäººç±»ï¼‰ï¼Œé‚£ä¹ˆé£è¡Œ `func fly()` è¿™ä¸ªæ–¹æ³•è¯¥å¦‚ä½•å®ç°ï¼Ÿæˆ‘ä»¬ä¸èƒ½æ˜¾å¼åœ°åœ¨ `Human`ï¼ˆäººç±»ï¼‰ä¸­å®ç°é£è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„äººéƒ½ä¼šé£å•Šï¼Œä½†æ˜¯`Superman`ï¼ˆè¶…äººï¼‰åˆéœ€è¦é£è¡Œæ–¹æ³•ï¼Œæˆ‘ä»¬ä¸æƒ³å†é‡å¤ä¸€éã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ç»„åˆï¼Œå¦‚åŒè®© `class SuperMan` è¶…äººç±»åŒ…å«ä¸€ä¸ª**é£è¡Œå¼•æ“**å±æ€§ `var flyingEngine: Flyer`

ä½†æ˜¯åªæ˜¯ç”¨ `superman.flyingEngine.fly()` ä»£æ›¿ `superman.fly()` ï¼Œçœ‹èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆä¼˜é›…ã€‚

## æ··åˆ & ç‰¹æ€§


ä»¥ä¸‹æ˜¯ **æ··åˆ & ç‰¹æ€§**ï¼ˆMixins & Traitsï¼‰æ–½å±•æ‰‹è„šçš„åœ°æ–¹

* é€šè¿‡ç»§æ‰¿ï¼Œä¸€èˆ¬å®šä¹‰ä½ çš„ç±»æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚æ‰€æœ‰çš„ ğŸ¶ `Dog` éƒ½æ˜¯ä¸€ä¸ªåŠ¨ç‰© `Animal`
* è€Œ `Traits` ç‰¹æ€§ï¼Œå®šä¹‰äº†ä½ çš„ç±»å¯ä»¥åšä»€ä¹ˆï¼Œæ¯”å¦‚ï¼Œæ‰€æœ‰çš„åŠ¨ç‰© `Animal` éƒ½èƒ½åƒ `eat()`ï¼Œä½†äººç±»ä¹Ÿèƒ½åƒï¼Œç¥ç§˜åšå£« **Doctor Who** è™½ç„¶æ—¢ä¸æ˜¯äººç±»ä¹Ÿä¸æ˜¯åŠ¨ç‰©ï¼Œä½†ä¹Ÿèƒ½åƒç‚¸é±¼æ¡å’Œè›‹å†»å¥¶ã€‚

æ‰€ä»¥å¯¹äºç‰¹æ€§æ¥è¯´ï¼Œä»–ä»¬æ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œè€Œå…³é”®åœ¨äºä»–ä»¬èƒ½åšä»€ä¹ˆ

ç»§æ‰¿å®šä¹‰äº†è¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œè€Œç‰¹æ€§åˆ™å®šä¹‰äº†è¿™ä¸ªå¯¹è±¡èƒ½åšä»€ä¹ˆ

æ›´æ£’çš„æ¶ˆæ¯æ˜¯ï¼šä¸€ä¸ªç±»å¯ä»¥éƒ¨ç½²å¾ˆå¤šç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ï¼Œè¿™æ˜¯åªä»å•ä¸€çˆ¶ç±»ç»§æ‰¿è€Œæ¥çš„å­ç±»æ‰€ä¸å¯ä¼åŠçš„ï¼Œå› ä¸ºä»–ä»¬ä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹æƒ…ã€‚

é‚£ä¹ˆåœ¨ Swift ä¸­è¯¥å¦‚ä½•åº”ç”¨ï¼Ÿ

## å¸¦é»˜è®¤å®ç°çš„åè®®
åœ¨ Swift 2.0 ä¸­ï¼Œå½“ä½ å®šä¹‰äº†ä¸€ä¸ª `protocol`ï¼Œå¯ä»¥é€šè¿‡ `extension` ä¸ºå…¶é™„åŠ ç›¸å…³çš„å®ç°æ–¹æ³•ï¼š

```swift
protocol Flyer {  
  func fly()
}

extension Flyer {  
  func fly() {
    print("I believe I can flyyyyy â™¬")
  }
}
```

é‰´äºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªéµå®ˆ `Flyer` åè®®çš„ç±»æˆ–ç»“æ„ä½“å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šå…è´¹è·å¾— `fly()` æ–¹æ³•ï¼

ä½ å¯ä»¥æ ¹æ®éœ€è¦éšæ—¶é‡è½½è¿™ä¸ªé»˜è®¤å®ç°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸åšï¼Œè¿™æ ·å°±è‡ªåŠ¨è·å¾—ä¸€ä¸ªé»˜è®¤å®ç°ï¼š

```swift
class SuperMan: Flyer {  
  // we don't implement fly() there so we get the default implementation and hear Clark sing
}

class IronMan: Flyer {  
  // be we can also give a specific implementation if needs be
  func fly() {
    thrusters.start()
  }
}
```  
Protocols æä¾›é»˜è®¤å®ç°è¿™ä¸€ç‰¹æ€§æ£’æäº†ï¼Œæ­£å¦‚ä½ æ‰€æ„¿å°† **Traits** çš„æ¦‚å¿µå¸¦è¿›äº† Swift

## åŒä¸€èº«ä»½ï¼Œå¤šç§èƒ½åŠ›
å…³äºç‰¹æ€§æœ€èµçš„ä¸€ç‚¹å°±æ˜¯ï¼šç‰¹æ€§ä¸ä¾èµ–äºåº”ç”¨è¿™äº›ç‰¹æ€§çš„å¯¹è±¡ã€‚ä»–ä»¬ï¼ˆç‰¹æ€§ï¼‰ä¸å…³å¿ƒè¿™äº›ç±»æ˜¯ä»€ä¹ˆï¼Œç»§æ‰¿è‡ªä½•æ–¹ï¼Œä»–ä»¬åªæ˜¯åœ¨è¿™äº›ç±»ä¸­å®šä¹‰äº†ä¸€äº›æ–¹æ³•ã€‚

è¿™å°±è§£å†³äº† `Doctor Who` æ—¢æ˜¯æ—¶é—´æ—…è¡Œè€…åˆæ˜¯å¤–æ˜Ÿäººï¼Œä»¥åŠ `Dr Emmett Brown` æ—¢æ˜¯æ—¶é—´æ—…è¡Œè€…åˆæ˜¯äººç±»çš„éš¾é¢˜ã€‚å†å¦‚é’¢é“ä¾ ä½œä¸ºä¸€ä¸ªäººç±»ï¼Œå’Œè¶…äººä½œä¸ºå¤–æ˜Ÿäººï¼Œä½†ä»–ä»¬éƒ½èƒ½é£ã€‚

ä½ æ˜¯è°å¹¶ä¸èƒ½å†³å®šä½ çš„èƒ½åŠ›

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ©ç”¨ **Traits** æ¥å®ç°æˆ‘ä»¬çš„æ¨¡å‹ç±»å§

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰å„ç§å„æ ·çš„ **Traits**ï¼ˆç‰¹æ€§ï¼‰ï¼š

```swift
protocol Flyer {  
  func fly()
}
protocol TimeTraveler {  
  var currentDate: NSDate { get set }
  mutating func travelTo(date: NSDate)
}
```

æ¥ç€ç»™å‡ºé»˜è®¤å®ç°ï¼š

```swift
extension Flyer {  
  func fly() {
    print("I believe I can flyyyyy â™¬")
  }
}

extension TimeTraveler {  
  mutating func travelTo(date: NSDate) {
    currentDate = date
  }
}
```

å…³äºå®šä¹‰è¶…çº§è‹±é›„è§’è‰²è¿™ä¸€ç‚¹ä¸Šï¼ˆä»–ä»¬æ˜¯è°ï¼‰ï¼Œæˆ‘ä»¬ä¾ç„¶å…ˆä½¿ç”¨ç»§æ‰¿ï¼Œä¸‹é¢æ¥å®ç°å‡ ä¸ªçˆ¶ç±»ï¼š

```swift
class Character {  
  var name: String
  init(name: String) {
    self.name = name
  }
}

class Human: Character {  
  var countryOfOrigin: String?
  init(name: String, countryOfOrigin: String? = nil) {
    self.countryOfOrigin = countryOfOrigin
    super.init(name: name)
  }
}

class Alien: Character {  
  let species: String
  init(name: String, species: String) {
    self.species = species
    super.init(name: name)
  }
}
```

ç°åœ¨èƒ½å¤ŸåŒæ—¶é€šè¿‡ä»–ä»¬çš„èº«ä»½ï¼ˆç»§æ‰¿ï¼‰å’Œèƒ½åŠ›ï¼ˆç‰¹æ€§/åè®®ï¼‰æ¥å®šä¹‰æˆ‘ä»¬çš„è¶…çº§è‹±é›„äº†ï¼š

```swift
class TimeLord: Alien, TimeTraveler {  
  var currentDate = NSDate()
  init() {
    super.init(name: "I'm the Doctor", species: "Gallifreyan")
  }
}

class DocEmmettBrown: Human, TimeTraveler {  
  var currentDate = NSDate()
  init() {
    super.init(name: "Emmett Brown", countryOfOrigin: "USA")
  }
}

class Superman: Alien, Flyer {  
  init() {
    super.init(name: "Clark Kent", species: "Kryptonian")
  }
}

class IronMan: Human, Flyer {  
  init() {
    super.init(name: "Tony Stark", countryOfOrigin: "USA")
  }
}
```

`Superman`ï¼ˆè¶…äººï¼‰å’Œ `IronMan`ï¼ˆé’¢é“ä¾ ï¼‰éƒ½ä½¿ç”¨ç›¸åŒçš„é£è¡Œ `fly()` å®ç°ï¼Œå³ä½¿ä»–ä»¬ç»§æ‰¿è‡ªä¸åŒçš„çˆ¶ç±»ï¼ˆä¸€ä¸ªæ˜¯å¤–æ˜Ÿäººï¼Œå¦ä¸€ä¸ªæ˜¯äººç±»ï¼‰ï¼Œå¹¶ä¸” Docotorsï¼ˆåšå£«ä»¬ï¼‰éƒ½æ‡‚å¾—æ—¶é—´æ—…è¡Œï¼š

```swift
let tony = IronMan()  
tony.fly() // prints "I believe I can flyyyyy â™¬"  
tony.name  // returns "Tony Stark"

let clark = Superman()  
clark.fly() // prints "I believe I can flyyyyy â™¬"  
clark.species  // returns "Kryptonian"

var docBrown = DocEmmettBrown()  
docBrown.travelTo(NSDate(timeIntervalSince1970: 499161600))  
docBrown.name // "Emmett Brown"  
docBrown.countryOfOrigin // "USA"  
docBrown.currentDate // Oct 26, 1985, 9:00 AM

var doctorWho = TimeLord()  
doctorWho.travelTo(NSDate(timeIntervalSince1970: 1303484520))  
doctorWho.species // "Gallifreyan"  
doctorWho.currentDate // Apr 22, 2011, 5:02 PM  
```

## æ—¶ç©ºæ¢é™©
ç°åœ¨è®©æˆ‘ä»¬æ¢ç´¢ä¸€ç§æ–°çš„ç©ºé—´æ—…è¡Œèƒ½åŠ›/ç‰¹æ€§ï¼š

```swift
protocol SpaceTraveler {  
  func travelTo(location: String)
}
```

æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼š

```swift
extension SpaceTraveler {  
  func travelTo(location: String) {
    print("Let's go to \(location)!")
  }
}
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Swift çš„ `extensions` ä¸ºç°æœ‰ç±»æ·»åŠ å…±æ€§çš„åè®®äº†ï¼Œæ¥ä¸‹æ¥ä¸ºå·²å®šä¹‰çš„è‹±é›„è§’è‰²æ·»åŠ è¿™äº›èƒ½åŠ›ã€‚å¦‚æœæˆ‘ä»¬ä¸è®¡è¾ƒé’¢é“ä¾ åœ¨ã€Šå¤ä»‡è€…è”ç›Ÿ 1ã€‹ã€çº½çº¦ä¹‹æˆ˜ã€ä¸­è‹±å‹‡åœ°æŠ±ç€æ ¸å¼¹é£åˆ°å¤–å¤ªç©ºçš„è¯ï¼Œé‚£ä¹ˆåªæœ‰ Doctorï¼ˆåšå£«ï¼‰å’Œ Supermanï¼ˆè¶…äººï¼‰æ‹¥æœ‰ç©ºé—´æ—…è¡Œçš„èƒ½åŠ›ï¼š

```swift
extension TimeLord: SpaceTraveler {}  
extension Superman: SpaceTraveler {}  
```

æ˜¯çš„ï¼Œè¿™å°±æ˜¯éœ€è¦æ·»åŠ è¶…èƒ½åŠ›ï¼Œç°åœ¨ä»–ä»¬å¯ä»¥ä½¿ç”¨ `travelTo()`é£å¾€ä»»ä½•åœ°æ–¹ï¼ä»£ç ç›¸å½“æ•´æ´ï¼Œä¸æ˜¯å—ï¼Ÿ

```swift
doctorWho.travelTo("Trenzalore") // prints "Let's go to Trenzalore!"  
```

### å¤šé‚€è¯·ç‚¹äººåŠ å…¥æˆ‘ä»¬çš„æ´¾å¯¹
ç°åœ¨è®©æˆ‘ä»¬ä¸ºæ›´å¤šçš„è‹±é›„èµ‹äºˆèƒ½åŠ›ï¼š

```swift
// Come along, Pond!
let amy = Human(name: "Amelia Pond", countryOfOrigin: "UK")  
// Damn, isn't she not a Time and Space Traveler too? Which doesn't make her a TimeLord, though

class Astraunaut: Human, SpaceTraveler {}  
let neilArmstrong = Astraunaut(name: "Neil Armstrong", countryOfOrigin: "USA")  
let laika = Astraunaut(name: "LaÃ¯ka", countryOfOrigin: "Russia")  
// Wait, LaÃ¯ka is a Dog, right?

class MilleniumFalconPilot: Human, SpaceTraveler {}  
let hanSolo = MilleniumFalconPilot(name: "Han Solo")  
let chewbacca = MilleniumFalconPilot(name: "Chewie")  
// Wait, isn't MilleniumFalconPilot defined as "Human"?!

class Spock: Alien, SpaceTraveler {  
  init() {
    super.init(name: "Spock", species: "Vulcan")
    // Woops not 100% right
  }
}
```

å‘¼å«ä¼‘æ–¯é¡¿ï¼Œæˆ‘ä»¬é‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚`Laika` ä¸æ˜¯äººç±»ä¹Ÿä¸æ˜¯ `Chewie`ï¼Œ`Spock` æ˜¯åŠäººç±»åŠç“¦è‚¯æ˜Ÿäººï¼Œæ‰€ä»¥è¿™äº›å®šä¹‰éƒ½æ˜¯é”™çš„ã€‚

æˆ‘ä»¬ç†æ‰€åº”å½“åœ°è®¤ä¸ºäººç±» `Human` å’Œå¤–æ˜Ÿäºº `Alien` éƒ½å¯ä»¥æŠ½è±¡ä¸ºå•ç‹¬çš„ç±»ï¼Œå¦‚æœæˆ‘ä»¬ç»§æ‰¿äº†è¿™äº›ç±»ï¼Œå°±ä¼šè¢«çœ‹åšæ˜¯å¼ºåˆ¶è®¤åŒäº†è¿™ç§èº«ä»½ç±»å‹ã€‚å¯æƒœåœ¨ç§‘å¹»å°è¯´ä¸­å¹¶ä¸æ˜¯è¿™æ ·ï¼Œè¿™æ‰æ˜¯å›°æ‰°æˆ‘ä»¬çš„é—®é¢˜æ‰€åœ¨ã€‚

è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ Swift ä¸­ä½¿ç”¨ Protocols å¹¶æä¾›åè®®é»˜è®¤å®ç°çš„åŸå› ã€‚å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬ç§»é™¤ç”±ç±»ç»§æ‰¿æ‰€å¸¦æ¥çš„é™åˆ¶ã€‚

å¦‚æœå°† `Human` å’Œ `Alien` ç”±ç±»æ”¹ä¸ºåè®®ï¼Œä¼šè·å¾—åˆ°ä»¥ä¸‹ä¼˜åŠ¿ï¼š

* æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª `MilleniumFalconPilot` ï¼ˆé£è¡Œå™¨ï¼‰ç±»å‹è€Œä¸ç”¨å¼ºè¿«ä»–æ˜¯ä¸€ä¸ªäººç±»ï¼Œæ¥ç€è®© `Chewie` æ¥é©¾é©¶
* æˆ‘ä»¬å¯ä»¥å®šä¹‰ `LaÃ¯ka` æ˜¯ä¸€ä¸ªå®‡èˆªå‘˜ `Astronaut`ï¼Œå³ä½¿å¥¹å¹¶ä¸æ˜¯ä¸€ä¸ªäººç±»
* æˆ‘ä»¬å¯ä»¥å®šä¹‰ `Spock` æ—¢æ˜¯äººç±» `Human` åˆæ˜¯å¤–æ˜Ÿäºº `Alien`
* æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†ç»§æ‰¿å®Œå…¨ä»æˆ‘ä»¬çš„ä¾‹å­ä¸­ç§»é™¤ï¼Œç”¨ç»“æ„ä½“ `structs` ä»£æ›¿ç±» `classes` æ¥å®šä¹‰æˆ‘ä»¬çš„ç±»å‹ã€‚ç»“æ„ä½“å¹¶ä¸æ”¯æŒç»§æ‰¿ï¼Œä½†å¯ä»¥éµä»å¤šä¸ªåè®®ã€‚

## åè®®æ— å¤„ä¸åœ¨
è‡³æ­¤å¯ä»¥å…¬å¸ƒæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆäº†ï¼šå°±æ˜¯å®Œå…¨ç”¨åè®®æ¥å–ä»£ç»§æ‰¿ï¼Œæ¯•ç«Ÿï¼Œæˆ‘ä»¬å¹¶ä¸åœ¨ä¹è¿™äº›è¶…çº§è‹±é›„æ˜¯ä»€ä¹ˆï¼Ÿåªå…³å¿ƒä»–ä»¬æœ‰å“ªäº›è¶…èƒ½åŠ›ç½¢äº†ã€‚


æˆ‘æ‰“åŒ…äº†ä¸€ä»½ **Playground** ä»£ç ï¼Œä½ å¯ä»¥ç‚¹è¿™é‡Œä¸‹è½½ã€‚æˆ‘ç”¨ä¸¤é¡µçš„ç¯‡å¹…æ¼”ç¤ºäº†å®Œå…¨ç”¨ `Protocol` å’Œ `Structs` æ˜¯å¦‚ä½•å®ç°è¿™ä¸€åˆ‡çš„ï¼Œåˆ«çŠ¹è±«ï¼Œæ‰“å¼€çœ‹ä¸€çœ‹ï¼

å½“ç„¶ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ å¿…é¡»ä¸æƒœä¸€åˆ‡ä»£ä»·é¿å…ç»§æ‰¿ï¼ˆä¸è¦éƒ½å¬ Dalek çš„ï¼Œä»–ä»¬æ¯•ç«Ÿç¼ºä¹æ„Ÿæƒ…ï¼‰ã€‚ç»§æ‰¿ä»ç„¶æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ï¼Œæ¯”å¦‚ `UILabel` æ˜¯ `UIView` å­ç±»ï¼Œä½ ä¾ç„¶èƒ½æ„Ÿå—åˆ°å…¶ä¸­çš„é€»è¾‘æ€§ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸å¦¨ç¢æˆ‘ä»¬å»æ¢ç´¢ä¸€ç‰‡æ–°å¤©åœ° **Mixins & Protocols**ï¼ˆé™„å¸¦é»˜è®¤å®ç°ï¼‰

## æ€»ç»“
ä½ åœ¨ Swift ä¹‹è·¯èµ°å¾—è¶Šè¿œï¼Œå°±è¶Šèƒ½æ„è¯†åˆ°è¿™å…¶å®æ˜¯ä¸€é—¨**é¢å‘åè®®ç¼–ç¨‹**çš„è¯­è¨€ï¼ŒSwift ä¸­å¤§èŒƒå›´åº”ç”¨çš„**åè®®**è¿œæ¯” OC ä¸­è¦å¼ºå¤§çš„å¤šã€‚æ¯•ç«Ÿï¼Œåƒ `Equatable`ï¼Œ`CustomStringConvertible` ä»¥åŠ `-able` è¿™ç§ Swift æ ‡å‡†åº“ä¸­çš„åè®®å…¶å®ä¹Ÿæ˜¯æ··åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„ï¼ˆMixinsï¼‰

é€šè¿‡ Swift çš„åè®®å’Œé™„å¸¦çš„é»˜è®¤å®ç°ï¼Œä½ å¯ä»¥å®ç° **Mixins & Traits**ï¼ˆæ··åˆ & ç‰¹æ€§ï¼‰ï¼Œä¸ä»…å¦‚æ­¤ï¼Œä½ è¿˜å¯ä»¥å®ç°æŠ½è±¡ç±»çš„åŠŸèƒ½ï¼Œè¿™ä¸€åˆ‡éƒ½ä¼šè®©ä½ çš„ç¼–ç ä¹‹è·¯ä¼šæ›´åŠ çµæ´»ã€‚

é‡‡å– **Mixins & Traits** æ–¹å¼ç»„ç»‡çš„ä»£ç ä¸ä»…å®šä¹‰äº†è¿™äº›ç±»å‹èƒ½åšä»€ä¹ˆï¼Œè¿˜è¯´æ˜äº†ä»–ä»¬æ˜¯ä»€ä¹ˆã€‚æ›´é‡è¦çš„ï¼Œä½ å¯ä»¥æŒ‰éœ€æœ‰é€‰æ‹©åœ°éƒ¨ç½²èƒ½åŠ›ã€‚è¿™æœ‰ç‚¹åƒä½ å»è¶…å¸‚è´­ç‰©ï¼Œä¸ºç±»å‹æŒ‘é€‰ä»–ä»¬å–œæ¬¢çš„èƒ½åŠ›æ”¾è¿›è´­ç‰©è½¦ä¸­ï¼Œè€Œå¹¶ä¸å»å…³å¿ƒè¿™äº›ç±»å‹ç»§æ‰¿è‡ªä½•æ–¹ã€‚

å›åˆ°æœ€åˆçš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª `protocol BurgerMenuManager` ä»¥åŠä¸€ä¸ªé»˜è®¤å®ç°ï¼Œç„¶åç®€å•åœ°è®©ä½ çš„ `View Controllers`ï¼ˆUIViewController æˆ– UITableViewController...ï¼‰éµä»è¿™ä¸ªåè®®å°±å¥½å•¦ï¼Œè¯¥ VC ä¼šè‡ªåŠ¨è·å–æ‰€æœ‰å®šä¹‰åœ¨ `BurgerMenuManager` ä¸­çš„èƒ½åŠ›ï¼Œè€Œä¸ç”¨å»æ‹…å¿ƒ `UIViewController` çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼



å…³äº `Protocol Extensions` è¿˜èƒ½è¯´å¾ˆå¤šï¼Œ**Don't Panic** æˆ‘ä¼šåœ¨ä»Šåçš„æ–‡ç« ä¸­å¾å¾é“æ¥ï¼Œåè®®æ‰©å±•å¯ä»¥åœ¨å¾ˆå¤šæ–¹é¢å¢å¼ºä½ çš„ä»£ç ã€‚è¿™ç¯‡æ–‡ç« å¤Ÿé•¿å•¦ï¼Œä»Šåå†å†™å•¦ï¼Œåˆ«èµ°å¼€é©¬ä¸Šå›æ¥~

---
åŸæ–‡é“¾æ¥:[http://chengway.in/chao-yue-ji-cheng-zhi-lu-xie-yi-hun-he/](http://chengway.in/chao-yue-ji-cheng-zhi-lu-xie-yi-hun-he/)

PS:ç°åœ¨JAVAçš„JDK1.8ä¸­ä¹Ÿæ”¯æŒäº†æ¥å£çš„é»˜è®¤å®ç°,ä¹Ÿå°±æ˜¯è¯´,JAVAä¹Ÿå¯ä»¥é¢å‘åè®®æ¥ç¼–ç¨‹äº†.


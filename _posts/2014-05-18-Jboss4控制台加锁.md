---
title: Jboss4控制台加锁
date: 2014-05-18 14:10:01
tags:
- JBOSS
- JAVA
comments: true
---

#Jboss4控制台加锁

由于Jboss服务器默认的情况下,可以通过远程的方式登陆控制台,然后关闭卸载服务.这对于真正的线上服务来说是非常危险的操作,哪怕是在电视台内部的局域网也是如此.因此,需要给JBOSS控制台加上密码.

##隐藏访问目录
这一步主要是隐藏控制台的访问目录.
具体是修改:`jboss_home/server/default/deploy/jbossweb-tomcat55.sar/conf/web.xml`文件:

```xml
<param-name>listings</param-name>
<param-value>false</param-value>     
```
<!--more-->

##设置JMX-Console控制台密码
因为即使用防火墙将8080端口屏蔽，别有用心的用户也可以通过http://your_domain/JMX-Console进行访问，修改如下:

1. 修改`JBOSS_HOME/server/default/deploy/jmx-console.war/WEB-INF/web.xml`,取消`<security-constraint>`这段注释
2. 修改同目录下`jboss-web.xml`,取消`<security-domain>`这段注释
3. 修改`JBOSS_HOME/server/default/conf/props/jmx-console-users.properties`,增加用户`修改 admin=admin   设置用户名=设置密码`
4. 修改同目录下`jmx-console-roles.properties`     修改 admin 改为   上面设置的用户名

##设置Web-Console控制台密码

1. 修改`JBOSS_HOME/server/default/deploy/management/console-mgr.sar/web-console.war/WEB-INF/web.xml` 取消`<security-constraint>`这段注释
2. 修改同目录下的`jboss-web.xml` 取消`<security-domain>` 这段注释
3. 修改`JBOSS_HOME/server/default/conf/props/web-console-roles.properties` 增加`admin=JBossAdmin,HttpInvoker`
4. 修改`JBOSS_HOME/server/default/conf/login-config.xml`.改为下面这样:

```xml
<application-policy name="web-console">
	<authentication>
		<login-module code="org.jboss.security.auth.spi.UsersRolesLoginModule" flag="required">
			<module-option name="usersProperties">props/web-console-users.properties</module-option>
			<module-option name="rolesProperties">props/web-console-roles.properties</module-option>
		</login-module>
	</authentication>
</application-policy>
```

5. 修改`jboss_home/server/default/conf/jboss-service.xml`.将:

```xml
<!-- A flag to disable the scans -->
<attribute name="ScanEnabled">false</attribute> <!--将true改为false-->
```

到这里,就完成了JBoss控制台密码的设置了. 重启JBOSS就OK了.